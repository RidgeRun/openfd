echo  SDCard Installer Script Generated by OpenFD
echo  Target Platform: ${mach_desc}
echo
askenv dummy "  Press any key to continue..." 1
echo
echo

echo  ====== Installing ${ipl_name}...
echo
fatload mmc 0 ${loadaddr} ${ipl_image}
${ipl_erase_cmd} ${ipl_erase_offset} ${ipl_erase_size}
${ipl_pre_write_cmd}
${ipl_write_cmd} ${loadaddr} ${ipl_write_offset} ${ipl_write_size}
${ipl_post_write_cmd}
setenv iplmd5sum ${iplmd5sum}
setenv iploffset ${iploffset}
setenv iplsize ${iplsize}
setenv iplpartitionsize ${iplpartitionsize}
echo
echo  ====== Installing ${bootloader_name}...
echo
fatload mmc 0 ${loadaddr} ${bootloader_image}
${bootloader_erase_cmd} ${bootloader_erase_offset} ${bootloader_erase_size}
${bootloader_pre_write_cmd}
${bootloader_write_cmd} ${loadaddr} ${bootloader_write_offset} ${bootloader_write_size}
${bootloader_post_write_cmd}
echo
echo  ====== Installing ${kernel_name}...
echo
fatload mmc 0 ${loadaddr} ${kernel_image}
${kernel_erase_cmd} ${kernel_erase_offset} ${kernel_erase_size}
${kernel_pre_write_cmd}
${kernel_write_cmd} ${loadaddr} ${kernel_write_offset} ${kernel_write_size}
${kernel_post_write_cmd}
setenv kmd5sum ${kmd5sum}
setenv koffset ${koffset}
setenv ksize ${ksize}
setenv kpartitionsize ${kpartitionsize}
echo
echo  ====== Installing ${fs_name}...
echo
fatload mmc 0 ${loadaddr} ${fs_image}
${fs_erase_cmd} ${fs_erase_offset} ${fs_erase_size}
${fs_pre_write_cmd}
${fs_write_cmd} ${loadaddr} ${fs_write_offset} ${fs_write_size}
${fs_post_write_cmd}
setenv fsmd5sum ${fsmd5sum}
setenv fsoffset ${fsoffset}
setenv fssize ${fssize}
setenv fspartitionsize ${fspartitionsize}
echo
echo  ====== Installing Boot Settings...
echo
setenv bootargs @BOOTARGS@
setenv autostart yes
setenv bootdelay 2
setenv bootcmd @BOOTCMD@
saveenv
echo
echo  ======= Installation Complete!
echo
echo "You may restart your board by"
echo "  - turning off power,"
echo "  - removing the SD card,"
echo "  - setting hardware to boot from NAND, and"
echo "  - powering on the board."
echo
echo