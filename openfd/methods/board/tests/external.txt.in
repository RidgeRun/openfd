echo  SDCard Installer Script Generated by OpenFD
echo  Target Platform: ${mach_desc}
echo
askenv dummy "  Press any key to continue..." 1
echo
echo
echo  ====== Installing ${ipl_name} ======
echo
fatload mmc 0 ${loadaddr} ${ipl_image}
${ipl_erase_cmd} ${ipl_erase_offset} ${ipl_erase_size}
${ipl_pre_write_cmd}
${ipl_write_cmd} ${loadaddr} ${ipl_write_offset} ${ipl_write_size}
${ipl_post_write_cmd}
setenv iplmd5sum ${iplmd5sum}
setenv iploffset ${iploffset}
setenv iplsize ${iplsize}
setenv iplpartitionsize ${iplpartitionsize}
echo
echo  ====== Installing ${bootloader_name} ======
echo
fatload mmc 0 ${loadaddr} ${bootloader_image}
${bootloader_erase_cmd} ${bootloader_erase_offset} ${bootloader_erase_size}
${bootloader_pre_write_cmd}
${bootloader_write_cmd} ${loadaddr} ${bootloader_write_offset} ${bootloader_write_size}
${bootloader_post_write_cmd}
echo
echo  ====== Installing ${kernel_name} ======
echo
fatload mmc 0 ${loadaddr} ${kernel_image}
${kernel_erase_cmd} ${kernel_erase_offset} ${kernel_erase_size}
${kernel_pre_write_cmd}
${kernel_write_cmd} ${loadaddr} ${kernel_write_offset} ${kernel_write_size}
${kernel_post_write_cmd}
setenv kmd5sum ${kmd5sum}
setenv koffset ${koffset}
setenv ksize ${ksize}
setenv kpartitionsize ${kpartitionsize}
echo
echo  ====== Installing ${filesystem_name} ======
echo
fatload mmc 0 ${loadaddr} ${filesystem_image}
${filesystem_erase_cmd} ${filesystem_erase_offset} ${filesystem_erase_size}
${filesystem_pre_write_cmd}
${filesystem_write_cmd} ${loadaddr} ${filesystem_write_offset} ${filesystem_write_size}
${filesystem_post_write_cmd}
setenv filesystemmd5sum ${fsmd5sum}
setenv filesystemoffset ${fsoffset}
setenv filesystemsize ${fssize}
setenv filesystempartitionsize ${fspartitionsize}
echo
echo  ====== Installing Environment ======
echo
setenv bootargs ${bootargs}
setenv autostart yes
setenv bootdelay 2
setenv bootcmd ${bootcmd}
saveenv
echo
echo  ====== Installation Complete! ======
echo
echo "You may restart your board by"
echo "  - turning off power,"
echo "  - removing the SD card,"
echo "  - setting hardware to boot from NAND, and"
echo "  - powering on the board."
echo
echo